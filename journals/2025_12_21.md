## VMware虚拟机CentOS系统扩容
collapsed:: true
	- ((66330953-30ba-4733-b613-5ba891d66493))
- 要扩容的虚拟机不能有快照，如果有要全部删除。此外，修改“虚拟机设置”-“硬盘”-“磁盘实用工具”-“扩展磁盘容量”后，需要在系统中手动设置将扩展出来的容量合并到磁盘中，才会生效。以下是设置“扩展磁盘容量”后在虚拟机中的操作，主要参考 [Linux 在VMware虚拟机上扩容_vgdisplay没有内容-CSDN博客](https://blog.csdn.net/weixin_39032619/article/details/111699295)和[VMware上对CentOS7虚拟机进行磁盘扩容、缩容_vmware 磁盘扩容-CSDN博客](https://blog.csdn.net/liuwei0376/article/details/146459438)
- 首先区分两种根分区管理模式，执行`vgdisplay`有结果，说明是LVM模式；没结果，说明是非LVM模式
  logseq.order-list-type:: number
- 对于非LVM模式，执行`df -TH`查看分区情况，看哪个分区容量最大，例如要处理的是sda3；执行`fdisk /dev/sda`启动分区工具，依次执行`d`-`3`，删除sda3分区；再依次执行`n`-`p`-`3`，再按两次回车指定分区起始扇区和结束扇区，最后按`w`退出分区工具；执行`partprobe /dev/sda`刷新分区信息，再次执行`df -TH`，可见sda3分区容量增加了
  logseq.order-list-type:: number
- 对于LVM模式，启动分区工具后，创建sda4新分区，退出分区工具，刷新分区；然后执行`pvcreate /dev/sda4`创建物理卷，再执行`vgextend centos /dev/sda4`扩展到的卷组“centos”，再执行`lvextend -l +100%FREE /dev/centos/root`扩展空闲空间，最后执行`xfs_growfs /dev/centos/root`刷新根分区；执行`df -TH`可见容量增加了
  logseq.order-list-type:: number